(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3107],{22326:function(e,r,s){Promise.resolve().then(s.bind(s,36477))},49983:function(e,r,s){"use strict";var t=s(57437);r.Z=e=>{let{title:r}=e;return(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:r})})})}},36477:function(e,r,s){"use strict";s.r(r);var t=s(57437),a=s(49983);s(16305),s(58238),s(47007),s(69547),s(44476),s(9711),s(55617),s(90052),s(91318);var n=s(2265),c=s(47228),i=s(65258);r.default=()=>{let[e,r]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[d,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{c.Z.get("/api/clients").then(e=>{r(e.data),l(!1)}).catch(e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des clients:",e),o("Erreur lors de la r\xe9cup\xe9ration des clients."),l(!1)})},[]);let u=async(e,s,t)=>{e.preventDefault();try{let e;"approuver"===s?e=await c.Z.post("/api/demandes/".concat(t,"/approuver")):"reject"===s&&(e=await c.Z.post("/api/demandes/".concat(t,"/reject"))),e.data.success?(alert("Action r\xe9ussie: "+e.data.success),c.Z.get("/api/clients").then(e=>{r(e.data)}).catch(e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des clients:",e)})):alert("Erreur: "+e.data.error)}catch(e){console.error("Erreur lors de l'ex\xe9cution de l'action :",e),alert("Une erreur est survenue.")}},h=(0,n.useMemo)(()=>[{Header:"#",accessor:"id"},{Header:"Nom",accessor:"name"},{Header:"Pr\xe9nom",accessor:"prenom"},{Header:"Actions",accessor:"actions",Cell:e=>{let{row:r}=e;return(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,t.jsx)("form",{onSubmit:e=>u(e,"approuver",r.original.demande_id),children:(0,t.jsx)("button",{type:"submit",className:"badge bg-success",style:{marginRight:"1%"},children:"Valider"})}),(0,t.jsx)("form",{onSubmit:e=>u(e,"reject",r.original.demande_id),children:(0,t.jsx)("button",{type:"submit",className:"badge bg-danger",children:"Rejeter"})})]})}}],[]),{getTableProps:m,getTableBodyProps:x,headerGroups:p,rows:j,prepareRow:f}=(0,i.useTable)({columns:h,data:e});return s?(0,t.jsx)("div",{children:"Chargement..."}):d?(0,t.jsx)("div",{children:d}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{title:"Dashboard"}),(0,t.jsx)("main",{id:"main",className:"main",children:(0,t.jsx)("section",{className:"section",style:{borderRadius:"20px"},children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-lg-12",children:(0,t.jsx)("div",{className:"card overflow-auto",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title",children:"Liste des demandes en attentes"}),(0,t.jsxs)("table",{...m(),className:"table",children:[(0,t.jsx)("thead",{children:p.map(e=>(0,t.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map(e=>(0,t.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")}))}))}),(0,t.jsx)("tbody",{...x(),children:j.map(e=>(f(e),(0,t.jsx)("tr",{...e.getRowProps(),children:e.cells.map(e=>(0,t.jsx)("td",{...e.getCellProps(),children:e.render("Cell")}))})))})]})]})})})})})})]})}},47228:function(e,r,s){"use strict";let t=s(38472).Z.create({baseURL:"https://metrobnque.xyz",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0,withXSRFToken:!0});r.Z=t},16305:function(){},91318:function(){},47007:function(){},58238:function(){},69547:function(){},9711:function(){},44476:function(){},55617:function(){},90052:function(){}},function(e){e.O(0,[6584,3303,3346,2462,1702,6867,5050,8472,5258,2971,7023,1744],function(){return e(e.s=22326)}),_N_E=e.O()}]);