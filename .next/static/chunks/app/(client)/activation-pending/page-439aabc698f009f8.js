(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6812],{19816:function(t,e,a){Promise.resolve().then(a.bind(a,29692))},98219:function(t,e,a){"use strict";var s=a(57437);e.Z=()=>(0,s.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-gray-100",children:"Loading..."})},29692:function(t,e,a){"use strict";a.r(e);var s=a(57437);a(16305);var n=a(16463),i=a(2265),r=a(98219),o=a(30349),c=a(47228),l=a(18087);e.default=()=>{let t=(0,l.useTranslations)(),{user:e}=(0,o.a)({middleware:"auth"}),a=(0,n.useRouter)(),[u,h]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{e&&("Client"!==e.role?a.push("/login"):c.Z.get("/api/check-activation-status").then(t=>{t.data.is_activated?a.push("/dash"):h(!1)}))},[e,a]),u||!e)?(0,s.jsx)(r.Z,{}):(0,s.jsxs)("div",{className:"min-h-screen bg-white text-black p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center",children:t("accountPending")}),(0,s.jsx)("p",{className:"text-center mt-4",children:t("accountNotActivated")}),(0,s.jsx)("a",{className:"text-center mt-4",href:"mailto:contact@metrobnque.xyz",children:t("viaMail")})," ",(0,s.jsx)("br",{}),(0,s.jsx)("a",{className:"text-center mt-4",href:'"tel:+33757852015"',children:t("viaPhone")})]})}},30349:function(t,e,a){"use strict";a.d(e,{a:function(){return o}});var s=a(31986),n=a(47228),i=a(2265),r=a(16463);let o=function(){let{middleware:t,redirectIfAuthenticated:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,r.useRouter)(),o=(0,r.useParams)(),{data:c,error:l,mutate:u}=(0,s.ZP)("/api/user",()=>n.Z.get("/api/user").then(t=>t.data).catch(t=>{if(409!==t.response.status)throw t;a.push("/verify-email")})),h=()=>n.Z.get("/sanctum/csrf-cookie"),d=async t=>{let{setErrors:e,...a}=t;await h(),e([]),n.Z.post("/register",a).then(()=>u()).catch(t=>{if(422!==t.response.status)throw t;e(t.response.data.errors)})},p=async t=>{let{setErrors:e,setStatus:a,...s}=t;await h(),e([]),a(null),n.Z.post("/login",s).then(()=>u()).catch(t=>{if(422!==t.response.status)throw t;e(t.response.data.errors)})},f=async t=>{let{setErrors:e,...a}=t;await h(),"function"==typeof e&&e([]),n.Z.post("/api/client-register",a).then(()=>u()).catch(t=>{if(422!==t.response.status)throw t;e(t.response.data.errors)})},m=async t=>{let{setErrors:e,setStatus:a,...s}=t;await h(),e([]),a(null),n.Z.post("/api/client-login",s).then(()=>u()).catch(t=>{if(422!==t.response.status)throw t;e(t.response.data.errors)})},w=async t=>{let{setErrors:e,setStatus:a,email:s}=t;await h(),e([]),a(null),n.Z.post("/forgot-password",{email:s}).then(t=>a(t.data.status)).catch(t=>{if(422!==t.response.status)throw t;e(t.response.data.errors)})},g=async t=>{let{setErrors:e,setStatus:s,...i}=t;await h(),e([]),s(null),n.Z.post("/reset-password",{token:o.token,...i}).then(t=>{"Admin"===t.data.role?a.push("/admin/login?reset="+btoa(t.data.status)):a.push("/login?reset="+btoa(t.data.status))}).catch(t=>{if(422!==t.response.status)throw t;e(t.response.data.errors)})},v=async()=>{l||await n.Z.post("/logout").then(()=>u()),window.location.pathname="/admin/login"},x=async()=>{l||await n.Z.post("/api/client-logout").then(()=>u()),window.location.pathname="/login"},Z=()=>{["/admin/login","/admin/register","/dashboard","/valider","/admin-profil","/crediter","/listeclient","/user-info","/update-dette"].includes(window.location.pathname)?v():x()};return(0,i.useEffect)(()=>{"guest"===t&&e&&c&&a.push(e),"/verify-email"===window.location.pathname&&(null==c?void 0:c.email_verified_at)&&a.push(e),"auth"===t&&l&&Z()},[c,l]),{user:c,register:d,login:p,registerClient:f,loginClient:m,forgotPassword:w,resetPassword:g,resendEmailVerification:t=>{let{setStatus:e}=t;n.Z.post("/email/verification-notification").then(t=>e(t.data.status))},logout:Z}}},47228:function(t,e,a){"use strict";let s=a(38472).Z.create({baseURL:"https://metrobnque.xyz",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0,withXSRFToken:!0});e.Z=s},16305:function(){}},function(t){t.O(0,[6584,8472,8087,1986,2971,7023,1744],function(){return t(t.s=19816)}),_N_E=t.O()}]);