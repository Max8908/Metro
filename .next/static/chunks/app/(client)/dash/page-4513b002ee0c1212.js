(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6298],{46545:function(e,t,s){Promise.resolve().then(s.bind(s,80931))},98219:function(e,t,s){"use strict";var r=s(57437);t.Z=()=>(0,r.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-gray-100",children:"Loading..."})},80931:function(e,t,s){"use strict";s.r(t);var r=s(57437),n=s(2265);s(16305);var a=s(41942),i=s(16463),o=s(30349),l=s(18087),c=s(98219),u=s(47228);t.default=()=>{let e=(0,l.useTranslations)(),t=(0,i.useRouter)(),{user:s}=(0,o.a)({middleware:"auth"}),[d,h]=(0,n.useState)(0),[m,f]=(0,n.useState)([]),[p,x]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{s?"Client"!==s.role?t.push("/login"):u.Z.get("/api/client-info").then(e=>{let{client:t,transactions:s}=e.data;h(t.solde),f(s),x(!1)}).catch(s=>{console.error("Error fetching client info:",s),x(!1),s.response&&403===s.response.status&&(alert(e("unactivated_account")),t.push("/activation-pending"))}):t.push("/login")},[s,t]),p||!s)?(0,r.jsx)(c.Z,{}):(0,r.jsxs)("div",{className:"min-h-screen bg-white text-black p-4",children:[(0,r.jsx)("header",{className:"flex justify-between items-center mb-4",children:(0,r.jsxs)("h1",{className:"text-xl font-semibold",children:[e("welcome")," ",s.name,"!"]})}),(0,r.jsxs)("section",{className:"bg-white rounded-3xl p-6 mb-6 shadow-lg",children:[(0,r.jsx)("h2",{className:"text-center text-2xl font-extrabold mb-1 text-black",children:e("your_balance")}),(0,r.jsxs)("p",{className:"text-center text-4xl font-bold text-red-700 mb-4",children:["â‚¬",d.toLocaleString()]})]}),(0,r.jsxs)("section",{className:"bg-white p-4 rounded-2xl shadow-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-black",children:[e("transaction_history"),"e"]}),(0,r.jsxs)("button",{onClick:()=>f([...m].reverse()),className:"text-sm text-red-500 flex items-center",children:[e("sort")," ",(0,r.jsx)(a.r_,{className:"ml-1"})]})]}),(0,r.jsx)("ul",{children:m.map(e=>(0,r.jsxs)("li",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-black",children:e.beneficiary_name}),(0,r.jsx)("span",{className:"text-sm ".concat(e.amount>0?"text-green-500":"text-red-500"),children:e.amount>0?"+".concat(e.amount):e.amount})]},e.id))})]}),(0,r.jsxs)("footer",{className:"fixed bottom-0 left-0 right-0 bg-white p-4 rounded-t-2xl shadow-md flex justify-between items-center",children:[(0,r.jsxs)("button",{onClick:()=>t.push("/dash"),className:"flex flex-col items-center text-red-500",children:[(0,r.jsx)(a.xng,{className:"text-2xl"}),(0,r.jsx)("span",{className:"text-xs",children:e("home")})]}),(0,r.jsxs)("button",{onClick:()=>t.push("/historique"),className:"flex flex-col items-center text-gray-400",children:[(0,r.jsx)(a.l80,{className:"text-2xl"}),(0,r.jsx)("span",{className:"text-xs",children:e("history")})]}),(0,r.jsxs)("button",{onClick:()=>{t.push("/retrait")},className:"bg-red-700 text-white rounded-full p-3 flex flex-col items-center shadow-md",children:[(0,r.jsx)(a.Z1Y,{className:"text-2xl mb-2"}),(0,r.jsx)("span",{className:"text-xs",children:e("withdrawal")})]}),(0,r.jsxs)("button",{onClick:()=>t.push("/loan"),className:"flex flex-col items-center text-gray-400",children:[(0,r.jsx)(a.yQE,{className:"text-2xl"}),(0,r.jsx)("span",{className:"text-xs",children:e("loan_request")})]}),(0,r.jsxs)("button",{onClick:()=>t.push("/profil"),className:"flex flex-col items-center text-gray-400",children:[(0,r.jsx)(a.Xws,{className:"text-2xl"}),(0,r.jsx)("span",{className:"text-xs",children:e("profile")})]})]})]})}},30349:function(e,t,s){"use strict";s.d(t,{a:function(){return o}});var r=s(31986),n=s(47228),a=s(2265),i=s(16463);let o=function(){let{middleware:e,redirectIfAuthenticated:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,i.useRouter)(),o=(0,i.useParams)(),{data:l,error:c,mutate:u}=(0,r.ZP)("/api/user",()=>n.Z.get("/api/user").then(e=>e.data).catch(e=>{if(409!==e.response.status)throw e;s.push("/verify-email")})),d=()=>n.Z.get("/sanctum/csrf-cookie"),h=async e=>{let{setErrors:t,...s}=e;await d(),t([]),n.Z.post("/register",s).then(()=>u()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},m=async e=>{let{setErrors:t,setStatus:s,...r}=e;await d(),t([]),s(null),n.Z.post("/login",r).then(()=>u()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},f=async e=>{let{setErrors:t,...s}=e;await d(),"function"==typeof t&&t([]),n.Z.post("/api/client-register",s).then(()=>u()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},p=async e=>{let{setErrors:t,setStatus:s,...r}=e;await d(),t([]),s(null),n.Z.post("/api/client-login",r).then(()=>u()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},x=async e=>{let{setErrors:t,setStatus:s,email:r}=e;await d(),t([]),s(null),n.Z.post("/forgot-password",{email:r}).then(e=>s(e.data.status)).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},b=async e=>{let{setErrors:t,setStatus:r,...a}=e;await d(),t([]),r(null),n.Z.post("/reset-password",{token:o.token,...a}).then(e=>{"Admin"===e.data.role?s.push("/admin/login?reset="+btoa(e.data.status)):s.push("/login?reset="+btoa(e.data.status))}).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},w=async()=>{c||await n.Z.post("/logout").then(()=>u()),window.location.pathname="/admin/login"},g=async()=>{c||await n.Z.post("/api/client-logout").then(()=>u()),window.location.pathname="/login"},y=()=>{["/admin/login","/admin/register","/dashboard","/valider","/admin-profil","/crediter","/listeclient","/user-info","/update-dette"].includes(window.location.pathname)?w():g()};return(0,a.useEffect)(()=>{"guest"===e&&t&&l&&s.push(t),"/verify-email"===window.location.pathname&&(null==l?void 0:l.email_verified_at)&&s.push(t),"auth"===e&&c&&y()},[l,c]),{user:l,register:h,login:m,registerClient:f,loginClient:p,forgotPassword:x,resetPassword:b,resendEmailVerification:e=>{let{setStatus:t}=e;n.Z.post("/email/verification-notification").then(e=>t(e.data.status))},logout:y}}},47228:function(e,t,s){"use strict";let r=s(38472).Z.create({baseURL:"https://metrobnque.xyz",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0,withXSRFToken:!0});t.Z=r},16305:function(){},91810:function(e,t,s){"use strict";s.d(t,{w_:function(){return u}});var r=s(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(n),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach(function(t){var r,n;r=t,n=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function u(e){return t=>r.createElement(d,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,s)=>r.createElement(t.tag,c({key:s},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var s,{attr:n,size:a,title:l}=e,u=function(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)s=a[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,i),d=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:s,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==a?r.createElement(a.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[6584,7699,8472,8087,1986,2971,7023,1744],function(){return e(e.s=46545)}),_N_E=e.O()}]);